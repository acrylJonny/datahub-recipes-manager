{
  "name": "Data Quality Test - Customer Table",
  "test_type": "DATA_QUALITY",
  "operation": "create",
  "description": "Validates data quality metrics for the customer table",
  "category": "DATA_QUALITY",
  "platform": "postgres",
  "platform_instance": "analytics-warehouse",
  "created_at": "2024-01-15T10:30:00Z",
  "environment": "dev",
  "staged_by": "web_ui",
  "graphql_input": {
    "mutation": "upsertDatasetAssertion",
    "input": {
      "urn": "urn:li:dataset:(urn:li:dataPlatform:postgres,analytics-warehouse.customer,PROD)",
      "assertion": {
        "type": "DATASET",
        "datasetAssertion": {
          "dataset": "urn:li:dataset:(urn:li:dataPlatform:postgres,analytics-warehouse.customer,PROD)",
          "fields": ["email", "customer_id"],
          "nativeType": "DATA_QUALITY",
          "nativeParameters": {
            "sql": "SELECT COUNT(*) as record_count, COUNT(DISTINCT email) as unique_emails, COUNT(CASE WHEN email IS NULL THEN 1 END) as null_emails FROM customer",
            "checks": [
              {
                "type": "not_null",
                "column": "email",
                "threshold": 0.95
              },
              {
                "type": "unique",
                "column": "customer_id", 
                "threshold": 1.0
              }
            ]
          }
        },
        "info": {
          "type": "DATA_QUALITY",
          "description": "Ensures customer table meets data quality standards for email uniqueness and customer_id uniqueness",
          "lastUpdated": {
            "time": 1705311000000,
            "actor": "urn:li:corpuser:datahub"
          }
        }
      }
    }
  },
  "metadata": {
    "stage_source": "web_ui_bulk_action",
    "original_test_id": "123",
    "original_urn": "urn:li:test:customer_data_quality",
    "file_created_at": "2024-01-15T10:30:00Z"
  }
} 